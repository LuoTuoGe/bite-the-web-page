import{d as st,r as y,c as l,a as n,b as nt,w as ut,e as J,F as b,f as w,n as m,g as B,t as C,u as L,h as lt,o as i,i as it,p as at,j as rt,_ as ct}from"./index.a3ed8fd9.js";function K(r,c,g){if(c===r.length-1){g(r);return}else for(let A=c;A<r.length;A++){const f=r[c];r[c]=r[A],r[A]=f,K(r,c+1,g),r[A]=r[c],r[c]=f}}function Q(r,c,g,A){for(let f=0;f<r.length;f++)c[g]=r[f],g===c.length-1?A(c):Q(r,c,g+1,A)}const M=r=>(at("data-v-29c2204d"),r=r(),rt(),r),vt={class:"container flex justify-between items-center text-lg py-2 border-b border-black fixed top-0 z-10 bg-back"},dt=M(()=>n("span",{class:"material-icons text-lg"},"arrow_back_ios",-1)),ft=M(()=>n("div",{class:"w-10"},null,-1)),pt={class:"container p-4 mt-12"},_t={class:"relative"},bt=["onClick"],xt=["onClick"],kt={class:"fixed right-4 bottom-24"},yt={class:"flex flex-col items-center"},gt={class:"flex"},At={class:"my-10 w-56 flex flex-wrap justify-center"},wt=["onClick"],mt={key:0,class:"fixed bottom-0 right-0 left-0 top-24 bg-back border-t border-black"},Ct={key:0,class:"mx-6 my-2"},ht={key:1,class:"mx-6 my-2"},Et={class:"my-table flex justify-center"},Bt={class:"border-t border-l border-black"},$t={class:"flex"},Ft={class:"item"},Dt={class:"flex"},Mt={class:"item"},St={class:"item"},Tt={key:0,class:"text-xs"},jt=M(()=>n("div",{class:"mx-6 my-2"},"\u5361\u724C\u6536\u76CA",-1)),Pt={class:"my-table flex justify-center"},qt={class:"flex border-t border-l border-black"},Lt={class:"item"},Nt={class:"mt-4 flex justify-around"},Ot={key:1,class:"p-4 fixed inset-y-16 inset-x-6 bg-back shadow-lg shadow-gray-400 rounded-lg"},Rt=M(()=>n("div",{class:"text-center text-lg"},"\u9A86\u9A7C",-1)),Vt={class:"flex flex-wrap justify-center my-2"},zt=["onClick"],Wt={key:0},Yt=M(()=>n("div",{class:"text-center text-lg"},"\u9677\u9631",-1)),Gt={class:"flex flex-wrap justify-center my-2"},Ht={class:"absolute bottom-4 inset-x-0 flex justify-center"},Jt=st({__name:"Camel",setup(r){const c=["blue","green","red","yellow","purple"],g=["\u84DD\u9A86\u9A7C","\u7EFF\u9A86\u9A7C","\u7EA2\u9A86\u9A7C","\u9EC4\u9A86\u9A7C","\u7D2B\u9A86\u9A7C"],A=["","+1","-1"],f=[5,3,2],a=y([]),$=y([]),x=y([]),N=y([]),O=y(0),j=y([]),R=y([]);function V(){a.value=[];for(let e=0;e<5;e++)a.value.push({id:e,position:0,top:99,bottom:99});$.value=[],x.value=[]}function U(){confirm("\u786E\u5B9A\u6E05\u7A7A\u72B6\u6001\u5417\uFF1F")&&V()}function z(e,t,v){if(v===0)return e;e[t].bottom=99;for(let s of e)if(s.top===t){s.top=99;break}let o=e[t].position+v;if(x.value[o]===1&&(o+=1),x.value[o]===2){e[t].position=o-1;let s=t;for(;;)if(e[s].top!==99)s=e[s].top,e[s].position=e[t].position;else{for(let u=0;u<e.length;u++)if(e[u].position===e[t].position&&e[u].bottom===99&&u!==t){e[s].top=u,e[u].bottom=s;break}break}}else{e[t].position=o;for(let u=0;u<e.length;u++)if(e[u].position===e[t].position&&e[u].top===99&&u!==t){e[u].top=t,e[t].bottom=u;break}let s=t;for(;e[s].top!==99;)s=e[s].top,e[s].position=e[t].position}return e}function X(e,t){a.value=z(a.value,e,t)}function P(e,t){let v=0;for(;;){if(e[t].bottom===99)return v;t=e[t].bottom,v++}}function W(e){return e.sort((t,v)=>P(e,v.id)-P(e,t.id)).sort((t,v)=>v.position-t.position).map(t=>t.id)}function Z(){const e=[1,2,3],t=[...$.value],v=new Array(t.length).fill(0),o=a.value.length,s=[];for(let p=0;p<o;p++)s.push(new Array(o).fill(0));if(t.length===0){const p=a.value.map(h=>({...h}));W(p).forEach((h,H)=>{s[H][h]+=1})}else K(t,0,p=>{Q(e,v,0,k=>{let h=a.value.map(E=>({...E}));for(let E=0;E<p.length;E++){const T=p[E],ot=k[E];if(h=z(h,T,ot),h[T].position>15)break}W(h).forEach((E,T)=>{s[T][E]+=1})})});const u=[1,3,18,162,1944,29160];N.value=s,O.value=u[t.length],j.value=s.map(p=>p.map(k=>k/u[t.length]*100)),I()}function I(){const e=a.value.length,t=[];for(let v=0;v<e;v++)t.push(new Array(f.length).fill(0));j.value.forEach((v,o)=>{v.forEach((s,u)=>{const p=s/100;if(o===0)for(let k in f)t[u][k]+=f[k]*p;else if(o===1)for(let k in f)t[u][k]+=p;else for(let k in f)t[u][k]-=p})}),R.value=t}V();const F=y(!1),S=y(!1),D=y(!1),d=y(!1);let _=0;async function tt(){S.value=!0,Z()}function Y(e){!e||(_=e,F.value=!0)}function G(e){if(F.value=!1,e===99){for(let t of a.value)t.position===_&&(t.position=0,t.top=99,t.bottom=99);return}if(D.value){const t=a.value[e];t.top!==99&&(a.value[t.top].bottom=t.bottom),t.bottom!==99&&(a.value[t.bottom].top=t.top),a.value[e].position=0,a.value[e].top=99,a.value[e].bottom=99}else if(_<a.value[e].position){alert("\u4E0D\u80FD\u5F80\u56DE\u79FB\u52A8");return}X(e,_-a.value[e].position),_=0}function q(e){e!=0&&(x.value[_+1]||x.value[_-1])||(F.value=!1,x.value[_]=e,_=0)}function et(e){$.value.includes(e)?$.value=$.value.filter(t=>t!==e):$.value.push(e)}return(e,t)=>{const v=lt("router-link");return i(),l(b,null,[n("div",vt,[nt(v,{to:"/",tag:"div",class:"w-10 pl-4"},{default:ut(()=>[dt]),_:1}),J(" \u9A86\u9A7C\u54E5\u8BA1\u7B97\u5668 "),ft]),n("div",pt,[n("div",_t,[(i(),l(b,null,w(16,o=>n("div",{class:"w-24 h-24 md:w-16 md:h-16 border border-black px-2",onClick:s=>Y(o-1)},[J(C(o-1)+" ",1),x.value[o-1]?(i(),l("div",{key:0,class:m(["mt-3 text-lg text-center",`text-${c[x.value[o-1]]}`])}," \u9677\u9631 "+C(A[x.value[o-1]]),3)):B("",!0)],8,bt)),64)),(i(!0),l(b,null,w(a.value,(o,s)=>(i(),l(b,null,[o.position!==0?(i(),l("div",{key:0,class:m(["absolute left-12",`text-${c[s]}`]),style:it({top:4.2+a.value[s].position*6-P(a.value,s)+"rem"}),onClick:u=>Y(o.position)},C(g[s]),15,xt)):B("",!0)],64))),256))])]),n("div",{class:"fixed right-4 top-14 my-button error w-24 my-2",onClick:U},"\u6062\u590D\u521D\u59CB\u72B6\u6001"),n("div",kt,[n("div",yt,[n("div",gt,[n("div",{class:m(["mx-2 text-xl decoration-4 underline-offset-4",D.value&&"underline"]),onClick:t[0]||(t[0]=o=>D.value=!0)},"\u8BBE\u7F6E\u6A21\u5F0F ",2),n("div",{class:m(["mx-2 text-xl decoration-4 underline-offset-4",!D.value&&"underline"]),onClick:t[1]||(t[1]=o=>D.value=!1)},"\u524D\u8FDB\u6A21\u5F0F ",2)]),n("div",At,[(i(!0),l(b,null,w(a.value,(o,s)=>(i(),l("div",{class:m(["w-16 h-16 rounded-lg mb-2 mx-1",`bg-${c[s]} `+(!$.value.includes(s)&&"opacity-20")]),onClick:u=>et(s)},null,10,wt))),256))]),n("div",{class:"my-button sub w-32 mb-2",onClick:t[2]||(t[2]=o=>S.value=!0)},"\u67E5\u770B\u7ED3\u679C"),n("div",{class:"my-button w-32",onClick:tt},"\u8BA1\u7B97")])]),S.value?(i(),l("div",mt,[d.value?B("",!0):(i(),l("div",Ct,"\u80DC\u7387")),d.value?(i(),l("div",ht,"\u51FA\u73B0\u9891\u6B21")):B("",!0),n("div",Et,[n("div",Bt,[n("div",$t,[n("div",Ft,C(d.value?O.value:""),1),(i(),l(b,null,w(g,(o,s)=>n("div",{class:m(["item",`text-${c[s]}`])},C(o),3)),64))]),(i(!0),l(b,null,w(d.value?N.value:j.value,(o,s)=>(i(),l("div",Dt,[n("div",Mt,"\u7B2C"+C(s+1)+"\u540D",1),(i(!0),l(b,null,w(o,u=>(i(),l("div",St,[n("span",{class:m([u===0&&"opacity-50 ",u===Math.max(...o)&&"text-red"])},[n("span",{class:m(!d.value&&"text-xl")},C(u.toFixed(0)),3),d.value?B("",!0):(i(),l("span",Tt,"%"))],2)]))),256))]))),256))])]),jt,n("div",Pt,[n("div",qt,[n("div",null,[(i(),l(b,null,w(f,o=>n("div",Lt,"\u6295\u6CE8"+C(o),1)),64))]),(i(!0),l(b,null,w(R.value,(o,s)=>(i(),l("div",null,[(i(!0),l(b,null,w(o,u=>(i(),l("div",{class:m(["item",[u<0&&"opacity-50 ",u>1&&"text-red"]])},C(+u.toFixed(2)),3))),256))]))),256))])]),n("div",Nt,[n("div",{class:"my-button w-32",onMousedown:t[3]||(t[3]=o=>d.value=!d.value),onMouseup:t[4]||(t[4]=o=>d.value=!d.value),onTouchstart:t[5]||(t[5]=o=>d.value=!d.value),onTouchend:t[6]||(t[6]=o=>d.value=!d.value)},"\u5207\u6362\u8868\u683C",32),n("div",{class:"my-button sub w-32",onClick:t[7]||(t[7]=o=>S.value=!1)},"\u5173\u95ED")])])):B("",!0),F.value?(i(),l("div",Ot,[n("div",null,[Rt,n("div",Vt,[(i(!0),l(b,null,w(a.value,(o,s)=>(i(),l("div",{key:s,class:m(["square",`text-${c[s]}`]),onClick:u=>G(s)},C(g[s]),11,zt))),128)),n("div",{class:"square",onClick:t[8]||(t[8]=o=>G(99))}," \u6E05\u7A7A")])]),!a.value.map(o=>o.position).includes(L(_))&&!x.value[L(_)+1]&&!x.value[L(_)-1]?(i(),l("div",Wt,[Yt,n("div",Gt,[n("div",{class:"square text-red",onClick:t[9]||(t[9]=o=>q(2))},"\u9677\u9631 -1"),n("div",{class:"square text-green",onClick:t[10]||(t[10]=o=>q(1))},"\u9677\u9631 +1"),n("div",{class:"square",onClick:t[11]||(t[11]=o=>q(0))}," \u6E05\u7A7A")])])):B("",!0),n("div",Ht,[n("div",{class:"my-button sub w-32",onClick:t[12]||(t[12]=o=>F.value=!1)},"\u53D6\u6D88")])])):B("",!0)],64)}}});const Qt=ct(Jt,[["__scopeId","data-v-29c2204d"]]);export{Qt as default};
